set -ex

ORACLE_PAYMENT=${ORACLE_PAYMENT:-1000000000000000000}
LINK_CONTRACT=${LINK_CONTRACT:-"0xa36085F69e2889c224210F603D836748e7dC0088"}
ORACLE_CONTRACT=${ORACLE_CONTRACT:-"0x2f90A6D021db21e1B2A077c5a37B3C7E75D15b7e"}
JOB_ID=${JOB_ID:-"0x2a9c6b27a0dd48529b9d44dd8c48eb7300000000000000000000000000000000"}

dapp update
dapp --use solc:0.5.0 build --extract
ORACLE=$(seth send --create out/AttributeOracle.bin 'AttributeOracle(address,address,bytes32,uint256)' $LINK_CONTRACT $ORACLE_CONTRACT $JOB_ID $ORACLE_PAYMENT)

set +ex
echo "-------------------------------------------------------------------------------"
echo "AttributeOracle deployed to: $ORACLE"
echo "-------------------------------------------------------------------------------"
