set -ex

NFT_UPDATE=${NFT_UPDATE:-0x4c512897a070d7c2055f8c8656ad184fbc0d0e0d}
REGISTRY=${REGISTRY:-"0x4c512897a070d7c2055f8c8656ad184fbc0d0e0d"}
NFT_ID=${NFT_ID:-0x535e7fd4fda56f7cdf7f321cdd6c9778de7179f0285224eeee167e70ca188724}
ORACLE=${ORACLE:-0xd94e8d0cae527435d2f6d6e24dc177365db7380e}
FINGERPRINT=${FINGERPRINT:-"0x55ddb309968a41f674974c7016c576fddc28b88569238e021e4dcc750d6676e2"}
RESULT=${RESULT:-"0x00000000000000000000000000000001000000000000000000000000000003e8"}

echo "Updating value "
seth send $ORACLE "update(uint,bytes32,bytes32)" $NFT_ID $FINGERPRINT $RESULT

echo "Fetching value from Oracle"
seth call $ORACLE "nftData(uint)(uint80,uint128,uint48)" $NFT_ID

echo "Fetching Value and Risk from NFTFeed"
NFT_ID=$(seth call $NFT_UPDATE 'nftID(address,uint)(bytes32)' $REGISTRY $NFT_ID)
seth call $NFT_UPDATE 'nftValues(bytes32)(uint)' $NFT_ID
seth call $NFT_UPDATE 'risk(bytes32)(uint)' $NFT_ID
